\chapter{Performance Evaluation}
%Here should be an introduction of what we will test (the emulator and/or the protocol). 

To evaluate the designed system a few key parameters are set as main pointers. This include the amount of users and the configurability of the solution, as well as it physical limitations. The system is then used to test the NB-IoT protocol, to show the usability of the solution. Some of these evaluation points have been described prior but a complete list is provided in the following section.

\section{Evaluation Points}
%Here should be a list of all requirement that is tested and criteria for passed not passed. 
The key parameters can be spilt into two groups: the emulator and the protocol. These groups are independent of each other in the sense that any other emulator should reveal the same results for the same protocol, given the same parameters.

\begin{itemize}
\item Emulator
	\begin{enumerate}
	\item Amount of users %(CPU,RAM) 
		\begin{itemize}
		\item Support TBD active users and TBD users total
		\end{itemize}
	\item Configurability  %(Channel, Number of UEs, etc.)
		\begin{itemize}
		\item Changeable parameters: Channel type, path loss, number of devices, data profile
		\end{itemize}
	\item Limits 
		\begin{itemize}
		\item Should support a output power up to 23 dB with a range of TBD dB
		\item Should support the frequency range from TBD to TBD and a bandwith up to TBD
		\end{itemize}
	\end{enumerate}
\item Protocol
	\begin{enumerate}[resume]
	\item  Ultra-low Complexity Devices
		\begin{itemize}
		\item The \gls{UE} has a sample rate of 240 KHz
		\item Only supports \gls{TBCC}
		\item Half-duplex
		\item Uses \gls{SISO} connection
		\end{itemize}
	\item Improved Coverage
		\begin{itemize}
		\item Support a \gls{MCL} of 164 dB
		\item Improve coverage by introducing \gls{CE} levels 
		\end{itemize}
	\item Support Massive Number of Devices 
		\begin{itemize}
		\item Support 52547 devices per cell-site sector based on a TBD data profile
		\end{itemize}
	\item Improved Power Efficiency
		\begin{itemize}
		\item  Achieve a battery life time of 10 years with a battery capacity of 5 Wh
		\item Using \gls{CE} to minimize Power amplifier backoff increasing efficiency
		\item Utilize \gls{cDRX}, \gls{eDRX} and \gls{PSM} to increase efficiency
	\end{itemize}
	\item Deployment flexibility
		\begin{itemize}
		\item The system should be able to be deployed inside legacy \gls{LTE}.
		\item The system should be able to be deployed as a stand alone solution.
		\end{itemize}
	\end{enumerate}
\end{itemize}
%\item Massiveness
%	\begin{enumerate}
%	\item Time to connect vs. connection request per second 
%	\item Data rate vs. number of users
%	\item Spectrum use vs. number of users
%	\item Interference level vs. number of users
%	\end{enumerate}
%\item Power
%	\begin{enumerate}
%	\item Energy consumption for attach.
%	\item Energy consumption vs. data rate
%	\item Energy consumption vs. coverage level
%	\item Energy consumption vs. operation mode
%	\item Energy consumption vs. number of UEs
%	\item Energy consumption vs. UE state (Connected (cDRX), eDRX, PSM, Off)
%	\end{enumerate}
%\end{enumerate}


Based on both the focus explained in \autoref{ch:Introduction} as well as some issues with the emulator explained TBD. The only points that is actually tested are: \todo{check if this is correct later}

\begin{itemize}
\item Emulator
	\begin{enumerate}
	\item[1.] Amount of users %(CPU,RAM) 
	\item[2.] Configurability %(Channel, Number of UEs, etc.)
%	\item[3.] Power control 
	\end{enumerate}
\item Protocol
	\begin{enumerate}
%	\item[4.] Ultra-low Complexity Devices
%	\item[5.] Improved Coverage
	\item[6.] Support Massive Number of Devices 
	\item[7.] Improved Power Efficiency
	\item[8.] Deployment flexibility
	\end{enumerate}
\end{itemize}

\newpage

\section{General Test Setup}
%Here should be a description of the general setup (including figure) used in all test and a list of baseline values for all parameters. Including physical setup, BSE, UEE.

The general way to setup the emulator is described here, some deviations occurs depending on the actual use of the system. A full setup is only needed when an external device is tested under the influence of a large number of interfering devices. The full setup can be seen in \autoref{fig:General_test_setup}.

\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{figures/General_test_setup.pdf}
\caption{General test setup, blue lines are control connections, orange lines are RF connections.}
\label{fig:General_test_setup}
\end{figure}

As seen in \autoref{fig:General_test_setup}, a \gls{TAP} orchestrator maintain the system. The orchestrator has a \gls{LAN} connection with each of the other elements with the exception of the external IoT device which is dependent on the device but typically is a serial connection. The \gls{PSU}s connection with the external IoT device is plain wires used to power on and analyse the power consumption of the device. Both the massive IoT device emulator as well as the external IoT device is connected to a combiner using RF SMA cables, this combiner is connected to the \gls{BSE} also using a RF SMA cable. 

The massive IoT device emulator PC is connected using USB 3.0 to the USRP B210. Mounted on the TX1 and RX1 port is a 30 dB attenuator which is connected to a combiner using RF SMA cables the output of the combiner acts as the output of the emulator.

The \gls{BSE} is interchangeable if the UXM is used TxRx1/Rx1 on RF Transceiver A is used as input. If the Amarisoft BSE is used the input is a combiner connected to the TX1 and RX1 ports on a USRP B210 using RF SMA cables, which is connected to the PC using a USB 3.0 connector.

The initial settings of each component in the system can be seen in \autoref{tab:setup_parameters}.

\begin{table}[H]
\captionsetup{belowskip=0em}
\noindent
\centering
%\resizebox{!}{0.5\textheight}{
\begin{minipage}[t]{0.48\textwidth}
\begin{tabular}{|p{4cm}|p{2cm}|}
\hline
\multicolumn{2}{|c|}{\textbf{Power Supply/Analyser}}                         \\ \hline
Enable             & Off            \\ \hline
Volt               & 3.6 V          \\ \hline
Ampere             & 2.5 A          \\ \hline
Sample interval	   & 100 $\mu$s		\\ \hline
\multicolumn{2}{c}{}\\ \hline
\multicolumn{2}{|c|}{\textbf{Massive IoT Emulator}}                          \\ \hline
\textbf{Parameter} & \textbf{Value} \\ \hline
Number of devices  & 0              \\ \hline
Rx gain            & 40 dB          \\ \hline
Tx gain            & 40 dB          \\ \hline
R14                & False          \\ \hline
Dl\_EARFCN         & 6240           \\ \hline
UE\_category       & Nb1            \\ \hline
\end{tabular}
%\caption{Initial values of the parameters in the emulator.}
\end{minipage}% 
\hfill
\begin{minipage}[t]{0.48\textwidth}
\begin{tabular}{|p{4cm}|p{2cm}|}
\hline
\multicolumn{2}{|c|}{\textbf{Ekstern IoT device}}                            \\ \hline
Enable             & Off            \\ \hline
Dl\_EARFCN         & 6240           \\ \hline
\multicolumn{2}{c}{}\\ \hline
\multicolumn{2}{|c|}{\textbf{Base Station Emulator}}                         \\ \hline
Cell type          & NB-IoT         \\ \hline
Number of cells    & 1              \\ \hline
Operation mode     & Standalone     \\ \hline
Dl\_EARFCN         & 6240           \\ \hline
Cell ID            & 0              \\ \hline
Tx gain            & 89 dB          \\ \hline
R14                & False          \\ \hline
nprach\_detect\_ threshold  & 19 dB  \\ \hline
\end{tabular}
%\caption{Initial values of the parameters in the emulator.}
%\label{tab:setup_parameters}
\end{minipage}
\caption{Initial values of the parameters in the emulator.}
\label{tab:setup_parameters}
\end{table}


\section{Evaluation}
%Here should be a step by step procedure of all test for all requirements, maybe put tapplans in appendix.

%\subsection{Amount of Devices}

\subsection{Configurability}

%\subsection{Power Control}

%\subsection{Ultra-low Complexity Devices}

%\subsection{Improved Coverage}

%\subsection{Support Massive Number of Devices}

\subsection{Improved Power Efficiency}
\subsubsection{Test Overview}
From \appref{app:bat_model} it can be seen that to estimate the battery life time of a device the following parameters is needed.
\begin{itemize}
%\item $P_{device}$
%\item $E_{modem,on}$
\item $E_{sync}$
\item $E_{attach}$
\item $P_{tx}$
\item $P_{eDRX}$
\item $P_{PSM}$
\end{itemize}

However in a \gls{NB-IoT} system a multitude of parameters have an influence either in regards to the time it takes to transmit anything or in the energy consumed during a transmission, this is the case for all states and transitions the device experience. To account for all of this is to humongous a task for this project, therefore a couple of parameters is chosen to simplify this task. The downside of this is the reliability of the results as these can only be assume valid in cases where the other parameters are chosen to the same values as used in this project. The values chosen are CP format, operation mode, frequency and $P_{TX}$. The CP format and operation mode is chosen as these are some often mentioned parameters which also only has a few values, repetition could also be considered here however as four different channels can be repeated with each having its own specifying parameter it is chosen to set all repetition to 1 and leave this parameter up to further analysis. The frequency typically has a high influence on the hardware used it is therefore considered as well as the $P_{TX}$  

With these informations the only thing needed is the data profile, the same models are used here as in \citep{Power_article}. Model 1 transmit every hour and Model 2 transmit every 24 hours, transmission size is 100 bytes for both models. %\todo{see if standards have some specified data profiles.}

From a measurement perspective some of these parameters can and should be measured together, these are $E_{sync}$ and $E_{attach}$. This is because these steps are depending on each other and can not be separated for the measurements only in the post processing. These are collectively referred to as $E_{conn}$ or energy to connect the device to the cell. 

To test these parameters the following setup is modified from \autoref{fig:General_test_setup} to the following:

\begin{figure}[H]
\centering
\includegraphics[width=0.5\textwidth]{figures/IPE_test_setup.pdf}
\caption{Setup used to test for the power efficiency of the \gls{DUT}'s}
\label{fig:IPE_test_setup}
\end{figure}

It should be noted that the \gls{DUT}'s in question have to power inputs, one for the device power and one for the RF modem power. Typically only the modem is connected to the power analyser. With the exception of measuring the device power where the the device power input is connected to the power analyser.

As the UXM is used as \gls{BSE} instead of Amarisoft the initial settings for this can be seen in \autoref{tab:UXM_initial_values}.

\begin{table}[H]
\centering
\begin{tabular}{|c|c|} \hline
\multicolumn{2}{|c|}{\textbf{UXM \gls{BSE}}} \\ \hline
Cell type			 & NB-IoT         \\ \hline
Number of cells		 & 1              \\ \hline
Operation mode		 & Standalone     \\ \hline
Host cell Dl\_EARFCN & 6240           \\ \hline
PRB offset			 & 0	          \\ \hline
Cell ID				 & 0              \\ \hline
Tx power			 & -80 dB/per 15 kHz \\ \hline
Repetition NPDSCH	 & 1	          \\ \hline
Max Repetition NPDCCH & 4	          \\ \hline
Repetition NPUSCH	 & 1	          \\ \hline
Repetition NPRACH	 & 1	          \\ \hline
CP format			 & Normal         \\ \hline
$P_{TX}$				 & 23 dBm         \\ \hline
MAC padding DL		 & off       	  \\ \hline
MAC padding UL		 & off       	  \\ \hline
\end{tabular}
\caption{Initial parameters of the UXM}
\label{tab:UXM_initial_values}
\end{table}

%\subsubsection{Device Power Consumption}
%
%To measure the device power, the power input to the device is used in the setup. The test is performed using the following procedure:
%
%\textbf{Test Procedure}
%\vspace{-1.5em}
%\begin{enumerate}
%\item Setup the \gls{DUT} as shown on \autoref{fig:IPE_test_setup}
%\item Put in settings as described in \autoref{tab:setup_parameters} and \autoref{tab:UXM_initial_values} 
%\item Turn on power supply 
%\item Measure power output over 2 min
%\item Save measurements as "<device>\_Power\_consumption"
%\item Turn off power supply
%\item Change to next \gls{DUT}
%\item Repeat step 1-7 for all \gls{DUT}s.
%\end{enumerate}
%
%\textbf{Results}\\
%\begin{table}[H]
%\centering
%\begin{tabular}{|c|c|c|c|}\hline
%\textbf{Device}	& Quectel	& Telit & Ublox \\ \hline
%$\mathbf{P_{device}}$	& & & \\ \hline
%\end{tabular}
%\caption{Average power consumption of the \gls{DUT}s}
%\label{tab:device_power_results}
%\end{table}

\subsubsection{Energy to Connect the Device to the Cell}

To measure the energy used to connect the device to the cell the following procedure is used.

\textbf{Test Procedure}\\
\begin{enumerate}
\item Setup the \gls{DUT} as shown on \autoref{fig:IPE_test_setup}
\item Turn on power supply 
\item Input settings as described in \autoref{tab:UXM_initial_values}
\item Input chosen value of chosen parameter
\item Put device in disconnected state 
\item Input to log "start <Parameters used> <Parameter value>"
\item Turn on power analyser
\item Verify connection to cell
\item Release DUT
\item Turn off power analyser
\item Save L3 log from UXM as "Attach\_<Parameters used>\_<Parameters value>.xml"
\item Turn off power supply
\item Change to next value
\item Repeat step 4-13 for all values
\item Save measurements as "Attach\_<Parameters used>\_MessageLog.csv"
\item Change to next parameter
\item Repeat step 3-16 for all parameters
\end{enumerate}


\textbf{Results}\\
\begin{figure}[H]
\centering
\begin{minipage}[tbp]{0.58\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Attach_raw.tex}}
\end{minipage}%
\begin{minipage}[tbp]{0.39\textwidth}
\resizebox{\textwidth}{!}{
\begin{tabular}{|c|p{6.5cm}|} \hline
\multicolumn{2}{|c|}{\textbf{Log messages}} \\ \hline
\textbf{Line number} & \textbf{Message} \\ \hline
1 & Security Protected NAS Message (Attach Request) \\ \hline
2 & Security Protected NAS Message (Authentication Response) \\ \hline
3 & Security Protected NAS Message (Security Mode Command) \\ \hline
4 & Security Protected NAS Message (Security Mode Complete) \\ \hline
5 & Security Protected NAS Message (Attach Accept) \\ \hline
6 & Security Protected NAS Message (Attach Complete) \\ \hline
\end{tabular}}
\end{minipage}
\caption{Example of raw data from measurement. Area A is boot up and cell synchronization, area B is attach procedure and Area C is Cell release and idle period. Dashed line indicates log messages.}
\label{fig:device_power_setup}
\end{figure}

The next step is to get the three needed parameters. The parameters are found as:

\begin{align}
E_{sync} &= \int_{A1}^{A2} f(x) dx \\
P_{attach} &= E(f(x)) \quad for \, B1 \leq x \leq B2\\
T_{attach} &=  B2 - B1
\end{align}
\begin{where}
\va{$E_{sync}$}{is the energy to boot up and synchronize to the cell}{J}
\va{$P_{attach}$}{is the average power consumption during the attach procedure}{W}
\va{$T_{attach}$}{is the time it take to attach to the network}{s}
\va{E(•)}{is the mean function}{1}
\va{f(x)}{is the data point at time x}{W}
\va{A1}{is the start time of area A}{s}
\va{A2}{is the end time of area A}{s}
\va{B1}{is the start time of area B}{s}
\va{B2}{is the end time of area B}{s}
\end{where}


This is done for all measurements and the results are presented along with their statistical properties in \autoref{fig:Sync_Points}, \autoref{fig:Attach_Power_Points} and \autoref{fig:Attach_Time_Points} respectively.

\begin{figure}[H]
\centering
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Sync_Points.tex}}
\end{minipage}
\hfill
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Sync_Stat.tex}}
\end{minipage}
\caption{Energy consumed during boot up and cell synchronization.}
\label{fig:Sync_Points}
\end{figure}

\begin{figure}[H]
\centering
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Attach_Power_Points.tex}}
\end{minipage}
\hfill
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Attach_Power_Stat.tex}}
\end{minipage}
\caption{Average power consumption during attach procedure.}
\label{fig:Attach_Power_Points}
\end{figure}

\begin{figure}[H]
\centering
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Attach_Time_Points.tex}}
\end{minipage}
\hfill
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Attach_Time_Stat.tex}}
\end{minipage}
\caption{Time spent during attach procedure}
\label{fig:Attach_Time_Points}
\end{figure}


The parameters can be modelled in several different ways, it is chosen to use a point distribution for both the $E_{sync}$ and $T_{attach}$ and a Gaussian distribution for $P_{attach}$ based on the the statistical properties of the parameters. 

This means that the parameters with respect to CP format, frequency, operation mode and $P_{TX}$ except in the case of $P_{attach}$ where $P_{TX}$ influences the mean value:

\begin{align}
E_{sync} &\sim\begin{cases} 1.05\cdot 10^{-6} \quad p = 0.758\\
1.76\cdot 10^{-6} \quad p = 0.242
\end{cases}\\
P_{attach} &\sim\mathcal{N}(0.269,0.173\cdot 10^{-6}) \\
T_{attach} &\sim\begin{cases} 2.215 \quad p = 0.2584\\
2.345 \quad p = 0.4382\\
2.470 \quad p = 0.1124\\
2.615 \quad p = 0.1573\\
2.725 \quad p = 0.0337
\end{cases}
\end{align}

As mentioned the parameter $P_{TX}$ influences the mean value of the power consumption during the attach procedure, it is therefore looked upon separately in \autoref{fig:Attach_Pmax}. 

\begin{figure}[H]
\centering
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Attach_Pmax.tex}}
\caption{Average power consumption as a function of $P_{TX}$ during the attach procedure.}
\label{fig:Attach_Pmax}
\end{figure}

From \autoref{fig:Attach_Pmax} it can be seen that the power consumption can be approximated using two functions based on the value of Pmax this can be contributed to the usage of a power amplifier. 

\subsubsection{Transmit Power Consumption}

To measure the transmit power the same setup used to measure the $E_{conn}$ can be used. However the UXM needs to enable the MAC padding this is done in both UL and DL to ensure the maximum utilization of the device. The measurement is performed with the following procedure:



\textbf{Test Procedure}\\
\begin{enumerate}
\item Setup the \gls{DUT} as shown on \autoref{fig:IPE_test_setup}
\item Turn on power supply 
\item Put in settings as described in \autoref{tab:UXM_initial_values} 
\item Enable MAC padding in UL and DL
\item Input chosen value of chosen parameter
\item Input to log "start <Parameter used> <Parameter value>"
\item Put device in connected state
\item Measure power output over 35 s
\item Change to next value
\item Repeat step 5-9 for all values.
\item Save measurements as "Transmit/<Parameter used>/Messagelog.csv"
\item Change to next parameter
\item Repeat step 5-12 for all parameters.
\item Turn off power supply
\end{enumerate}

\textbf{Results}\\
\begin{figure}[H]
\centering
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Transmit_raw.tex}}
\caption{Example of raw measurements of the transmit case.}
\label{fig:device_power_setup}
\end{figure}

The next step is to find the average power consumption as:
\begin{equation}
P_{transmit} = E(f(x))
\end{equation}
\begin{where}
\va{$P_{transmit}$}{is the average power consumption during transmit state}{W}
\end{where}

This is done for all parameters and the result can be seen in \autoref{fig:Transmit_Points}.

\begin{figure}[H]
\centering
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Transmit_Points.tex}}
\end{minipage}
\hfill
\begin{minipage}{0.48\textwidth}
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Transmit_Stat.tex}}
\end{minipage}
\caption{Average power consumption when in transmit state.}
\label{fig:Transmit_Points}
\end{figure}

As $P_{transmit}$ shares several traits with $P_{attach}$ it can also be modelled using a Gaussian distribution with $P_{TX}$ setting the mean value this can be from \autoref{fig:Transmit_Points} and \autoref{fig:Transmit_Pmax}. The mean is split into two models for the transmit part as expected from the attach measurements. 

\begin{figure}[H]
\centering
\resizebox{\textwidth}{!}{
\input{figures/QuectelMeas/Transmit_Pmax.tex}}
\caption{Transmit Pmax}
\label{fig:Transmit_Pmax}
\end{figure}

This means that $P_{transmit}$ can be modelled as:
\begin{align}
&P_{transmit} \sim \mathcal{N}(\mu_{Pmax},11.034\cdot 10^{-6}) \\ \nonumber
&\mu_{Pmax} = \begin{cases} 0.0433\cdot\exp{(0.0002\cdot x)} + 4.13\cdot10^{-3}\cdot\exp{(0.116\cdot x)} \quad for x \leq 8 dBm \\
0.0399\cdot\exp{(0.0442\cdot x)} + 22.3\cdot10^{-6}\cdot\exp{(0.545\cdot x)} \quad for x > 8 dBm \end{cases}
\end{align}


\subsubsection{\gls{eDRX} Power Consumption}
\textbf{Test Setup}\\
To measure the device power the setup needs to be changed as seen in \autoref{fig:device_power_setup}.

\begin{figure}[H]
\centering
\resizebox{\textwidth}{!}{
\missingfigure{device power setup}}
\caption{Setup to measure device power consumption.}
\label{fig:device_power_setup}
\end{figure}



Specific settings:
\begin{table}[H]
\centering
\begin{tabular}{|c|c|} \hline
\multicolumn{2}{|c|}{\textbf{Base Station Emulator}} \\ \hline
Cell type          & NB-IoT         \\ \hline
Number of cells    & 1              \\ \hline
Operation mode     & Standalone     \\ \hline
Dl\_EARFCN         & 6310           \\ \hline
Cell ID            & 0              \\ \hline
Tx gain            & 89 dB          \\ \hline
R14                & False          \\ \hline
nprach\_detect\_threshold  & 19 dB  \\ \hline
\end{tabular}
\caption{Specific parameter used to measure device power}
\label{tab:device_power_settings}
\end{table}
\todo{table is just copy pasted}


\textbf{Test Procedure}\\
\begin{enumerate}
\item Setup the \gls{DUT} as shown on \autoref{fig:device_power_setup}
\item Put in settings as described in \autoref{tab:device_power_settings} 
\item Turn on power supply 
\item Measure power output over 2 min
\item Save measurements as "<device>\_power\_consumption"
\item Turn off power supply
\item Change to next device
\item Repeat step 1-7 for all devices.
\end{enumerate}

\textbf{Results}\\
\begin{table}[H]
\centering
\begin{tabular}{|c|c|c|c|}\hline
\textbf{Device}	& Quectel	& Telit & Ublox \\ \hline
$\mathbf{P_{device}}$	& & & \\ \hline
\end{tabular}
\caption{•}
\label{tab:device_power_results}
\end{table}

\subsubsection{\gls{PSM} Power Consumption}
\textbf{Test Setup}\\
To measure the device power the setup needs to be changed as seen in \autoref{fig:device_power_setup}.
\begin{figure}[H]
\centering
\resizebox{\textwidth}{!}{
\missingfigure{device power setup}}
\caption{Setup to measure device power consumption.}
\label{fig:device_power_setup}
\end{figure}

Specific settings:
\begin{table}[H]
\centering
\begin{tabular}{|c|c|} \hline
\multicolumn{2}{|c|}{\textbf{Base Station Emulator}} \\ \hline
Cell type          & NB-IoT         \\ \hline
Number of cells    & 1              \\ \hline
Operation mode     & Standalone     \\ \hline
Dl\_EARFCN         & 6310           \\ \hline
Cell ID            & 0              \\ \hline
Tx gain            & 89 dB          \\ \hline
R14                & False          \\ \hline
nprach\_detect\_threshold  & 19 dB  \\ \hline
\end{tabular}
\caption{Specific parameter used to measure device power}
\label{tab:device_power_settings}
\end{table}
\todo{table is just copy pasted}


\textbf{Test Procedure}\\
\begin{enumerate}
\item Setup the \gls{DUT} as shown on \autoref{fig:device_power_setup}
\item Put in settings as described in \autoref{tab:device_power_settings} 
\item Turn on power supply 
\item Measure power output over 2 min
\item Save measurements as "<device>\_power\_consumption"
\item Turn off power supply
\item Change to next device
\item Repeat step 1-7 for all devices.
\end{enumerate}

\textbf{Results}\\
\begin{table}[H]
\centering
\begin{tabular}{|c|c|c|c|}\hline
\textbf{Device}	& Quectel	& Telit & Ublox \\ \hline
$\mathbf{P_{device}}$	& & & \\ \hline
\end{tabular}
\caption{•}
\label{tab:device_power_results}
\end{table}



%\subsection{Battery Lifetime}
%From the model derived in \todo{make ref to bat model section} it can be found that the necessary parameters are:
%\begin{itemize}
%\item $P_device$
%\item 
%\end{itemize}

\section{Results}
Here should be a list of all results produced from the test. A short note should be attached to the results if the requirement is passed and if not why not.

\begin{table}[H]
\centering
\begin{tabular}{|l|l|} \hline
\textbf{Requirement}              & \textbf{Performance} \\ \hline
Amount of Devices                 &                      \\ \hline
Configurability                   &                      \\ \hline
Power Control                     &                      \\ \hline
Low Complexity Devices            &                      \\ \hline
Improved Coverage                 &                      \\ \hline
Support Massive Amount of Devices &                      \\ \hline
Improved Power Efficiency         &                      \\ \hline
Deployment Flexibility            &                      \\ \hline
\end{tabular}
\caption{My caption}
\label{my-label2}
\end{table}

%\section{Table Summary or Discussion}